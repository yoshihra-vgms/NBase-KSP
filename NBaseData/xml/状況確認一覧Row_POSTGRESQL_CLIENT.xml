<?xml version="1.0" encoding="utf-8" ?>

<databaseConfig>

	<sql name="GetRecords">
    SELECT

    DM_KANRI_KIROKU.DM_KANRI_KIROKU_ID
    , '' DM_KOUBUNSHO_KISOKU_ID
    , DM_KANRI_KIROKU.ISSUE_DATE
    , MS_DM_BUNRUI.NAME AS BUNRUI_NAME
    , MS_DM_SHOUBUNRUI.NAME AS SHOUBUNRUI_NAME
    , MS_DM_HOUKOKUSHO.BUNSHO_NO
    , MS_DM_HOUKOKUSHO.BUNSHO_NAME
    , DM_KANRI_KIROKU.MS_DM_HOUKOKUSHO_ID
    , DM_KANRI_KIROKU.STATUS
    , DM_KANRI_KIROKU.FILE_NAME
    , DM_KANRI_KIROKU.BIKOU
    , DM_KANRI_KIROKU.RENEW_DATE
    , DM_KANRI_KIROKU.RENEW_USER_ID
    , DM_KANRYO_INFO.KANRYO_DATE
    , MS_USER.SEI
    , MS_USER.MEI

    FROM

    DM_KANRI_KIROKU
    INNER JOIN MS_DM_HOUKOKUSHO ON MS_DM_HOUKOKUSHO.MS_DM_HOUKOKUSHO_ID = DM_KANRI_KIROKU.MS_DM_HOUKOKUSHO_ID
    INNER JOIN MS_DM_BUNRUI ON MS_DM_BUNRUI.MS_DM_BUNRUI_ID = MS_DM_HOUKOKUSHO.MS_DM_BUNRUI_ID
    LEFT JOIN MS_DM_SHOUBUNRUI ON MS_DM_SHOUBUNRUI.MS_DM_SHOUBUNRUI_ID = MS_DM_HOUKOKUSHO.MS_DM_SHOUBUNRUI_ID

    LEFT JOIN DM_KANRYO_INFO ON DM_KANRYO_INFO.LINK_SAKI_ID = DM_KANRI_KIROKU.DM_KANRI_KIROKU_ID AND DM_KANRYO_INFO.DELETE_FLAG = 0
    LEFT JOIN MS_USER ON MS_USER.MS_USER_ID = DM_KANRYO_INFO.MS_USER_ID

    WHERE DM_KANRI_KIROKU.DELETE_FLAG = 0


    #APPEND_WHERE_STR_1#

    UNION

    SELECT

    '' DM_KANRI_KIROKU_ID
    , DM_KOUBUNSHO_KISOKU.DM_KOUBUNSHO_KISOKU_ID
    , DM_KOUBUNSHO_KISOKU.ISSUE_DATE
    , MS_DM_BUNRUI.NAME AS BUNRUI_NAME
    , MS_DM_SHOUBUNRUI.NAME AS SHOUBUNRUI_NAME
    , DM_KOUBUNSHO_KISOKU.BUNSHO_NO
    , DM_KOUBUNSHO_KISOKU.BUNSHO_NAME
    ,'' MS_DM_HOUKOKUSHO_ID
    , DM_KOUBUNSHO_KISOKU.STATUS
    , DM_KOUBUNSHO_KISOKU.FILE_NAME
    , DM_KOUBUNSHO_KISOKU.BIKOU
    , DM_KOUBUNSHO_KISOKU.RENEW_DATE
    , DM_KOUBUNSHO_KISOKU.RENEW_USER_ID
    , DM_KANRYO_INFO.KANRYO_DATE
    , MS_USER.SEI
    , MS_USER.MEI

    FROM
    DM_KOUBUNSHO_KISOKU
    INNER JOIN MS_DM_BUNRUI ON MS_DM_BUNRUI.MS_DM_BUNRUI_ID = DM_KOUBUNSHO_KISOKU.MS_DM_BUNRUI_ID
    LEFT JOIN MS_DM_SHOUBUNRUI ON MS_DM_SHOUBUNRUI.MS_DM_SHOUBUNRUI_ID = DM_KOUBUNSHO_KISOKU.MS_DM_SHOUBUNRUI_ID

    LEFT JOIN DM_KANRYO_INFO ON DM_KANRYO_INFO.LINK_SAKI_ID = DM_KOUBUNSHO_KISOKU.DM_KOUBUNSHO_KISOKU_ID AND DM_KANRYO_INFO.DELETE_FLAG = 0
    LEFT JOIN MS_USER ON MS_USER.MS_USER_ID = DM_KANRYO_INFO.MS_USER_ID

    WHERE DM_KOUBUNSHO_KISOKU.DELETE_FLAG = 0

    #APPEND_WHERE_STR_2#
  </sql>

	<sql name="ByMsDmBunruiID_1">
		AND MS_DM_HOUKOKUSHO.MS_DM_BUNRUI_ID = :MS_DM_BUNRUI_ID
	</sql>
	
	<sql name="ByMsDmBunruiID_2">
		AND DM_KOUBUNSHO_KISOKU.MS_DM_BUNRUI_ID = :MS_DM_BUNRUI_ID
	</sql>

  <sql name="ByMsDmBunruiIDs_1">
    MS_DM_HOUKOKUSHO.MS_DM_BUNRUI_ID in ( #INNER_SQL_MS_DM_BUNRUI_IDS# )
  </sql>

  <sql name="ByMsDmBunruiIDs_2">
    DM_KOUBUNSHO_KISOKU.MS_DM_BUNRUI_ID in ( #INNER_SQL_MS_DM_BUNRUI_IDS# )
  </sql>


  <sql name="ByMsDmShoubunruiID_1">
		AND MS_DM_HOUKOKUSHO.MS_DM_SHOUBUNRUI_ID = :MS_DM_SHOUBUNRUI_ID
	</sql>

	<sql name="ByMsDmShoubunruiID_2">
		AND DM_KOUBUNSHO_KISOKU.MS_DM_SHOUBUNRUI_ID = :MS_DM_SHOUBUNRUI_ID
	</sql>


  <sql name="ByMsDmShoubunruiIDs_1">
    MS_DM_HOUKOKUSHO.MS_DM_SHOUBUNRUI_ID in ( #INNER_SQL_MS_DM_SHOUBUNRUI_IDS# )
  </sql>

  <sql name="ByMsDmShoubunruiIDs_2">
    DM_KOUBUNSHO_KISOKU.MS_DM_SHOUBUNRUI_ID in ( #INNER_SQL_MS_DM_SHOUBUNRUI_IDS# )
  </sql>




  <sql name="LikeBunshoNo_1">
		AND MS_DM_HOUKOKUSHO.BUNSHO_NO LIKE :BUNSHO_NO
	</sql>

	<sql name="LikeBunshoNo_2">
		AND DM_KOUBUNSHO_KISOKU.BUNSHO_NO LIKE :BUNSHO_NO
	</sql>

	<sql name="LikeBunshoName_1">
		AND MS_DM_HOUKOKUSHO.BUNSHO_NAME LIKE :BUNSHO_NAME
	</sql>

	<sql name="LikeBunshoName_2">
		AND DM_KOUBUNSHO_KISOKU.BUNSHO_NAME LIKE :BUNSHO_NAME
	</sql>

  <sql name="LikeBikou_1">
    AND DM_KANRI_KIROKU.BIKOU LIKE :BIKOU
  </sql>

  <sql name="LikeBikou_2">
    AND DM_KOUBUNSHO_KISOKU.BIKOU LIKE :BIKOU
  </sql>

	<sql name="LikeKeywords_1">
		AND
		(
		MS_DM_HOUKOKUSHO.BUNSHO_NO LIKE :KEYWORDS
		OR
		DM_KANRI_KIROKU.FILE_NAME LIKE :KEYWORDS
		OR
		DM_KANRI_KIROKU.BIKOU LIKE :KEYWORDS
		)
	</sql>

	<sql name="LikeKeywords_2">
		AND
		(
		DM_KOUBUNSHO_KISOKU.BUNSHO_NO LIKE :KEYWORDS
		OR
		DM_KOUBUNSHO_KISOKU.FILE_NAME LIKE :KEYWORDS
		OR
		DM_KOUBUNSHO_KISOKU.BIKOU LIKE :KEYWORDS
		)
	</sql>


	<sql name="ByIssueDateFrom_1">
		AND to_char(DM_KANRI_KIROKU.ISSUE_DATE,'yyyy/mm/dd') >= :ISSUE_DATE_FROM
	</sql>
	<sql name="ByIssueDateTo_1">
		AND to_char(DM_KANRI_KIROKU.ISSUE_DATE,'yyyy/mm/dd') &lt;= :ISSUE_DATE_TO
	</sql>
	<sql name="ByIssueDateFromTo_1">
		AND to_char(DM_KANRI_KIROKU.ISSUE_DATE,'yyyy/mm/dd') >= :ISSUE_DATE_FROM
		AND to_char(DM_KANRI_KIROKU.ISSUE_DATE,'yyyy/mm/dd') &lt;= :ISSUE_DATE_TO
	</sql>

	<sql name="ByIssueDateFrom_2">
		AND to_char(DM_KOUBUNSHO_KISOKU.ISSUE_DATE,'yyyy/mm/dd') >= :ISSUE_DATE_FROM
	</sql>
	<sql name="ByIssueDateTo_2">
		AND to_char(DM_KOUBUNSHO_KISOKU.ISSUE_DATE,'yyyy/mm/dd') &lt;= :ISSUE_DATE_TO
	</sql>
	<sql name="ByIssueDateFromTo_2">
		AND to_char(DM_KOUBUNSHO_KISOKU.ISSUE_DATE,'yyyy/mm/dd') >= :ISSUE_DATE_FROM
		AND to_char(DM_KOUBUNSHO_KISOKU.ISSUE_DATE,'yyyy/mm/dd') &lt;= :ISSUE_DATE_TO
	</sql>


	<sql name="IsStatus0_1">
		AND DM_KANRYO_INFO.KANRYO_DATE IS NULL
	</sql>

	<sql name="IsStatus0_2">
		AND DM_KANRYO_INFO.KANRYO_DATE IS NULL
	</sql>

	<sql name="IsStatus1_1">
		AND DM_KANRYO_INFO.KANRYO_DATE IS NOT NULL
	</sql>

	<sql name="IsStatus1_2">
		AND DM_KANRYO_INFO.KANRYO_DATE IS NOT NULL
	</sql>

	<sql name="OrderBy">
		Order By
		ISSUE_DATE
	</sql>


  <sql name="GetKanriKirokuIDs">
    SELECT

    DM_KANRI_KIROKU.DM_KANRI_KIROKU_ID


    FROM

    DM_KANRI_KIROKU
    INNER JOIN MS_DM_HOUKOKUSHO ON MS_DM_HOUKOKUSHO.MS_DM_HOUKOKUSHO_ID = DM_KANRI_KIROKU.MS_DM_HOUKOKUSHO_ID
    INNER JOIN MS_DM_BUNRUI ON MS_DM_BUNRUI.MS_DM_BUNRUI_ID = MS_DM_HOUKOKUSHO.MS_DM_BUNRUI_ID
    LEFT JOIN MS_DM_SHOUBUNRUI ON MS_DM_SHOUBUNRUI.MS_DM_SHOUBUNRUI_ID = MS_DM_HOUKOKUSHO.MS_DM_SHOUBUNRUI_ID
    LEFT JOIN DM_KANRYO_INFO ON DM_KANRYO_INFO.LINK_SAKI_ID = DM_KANRI_KIROKU.DM_KANRI_KIROKU_ID AND DM_KANRYO_INFO.DELETE_FLAG = 0

    WHERE (DM_KANRI_KIROKU.DELETE_FLAG = 0 or DM_KANRI_KIROKU.DELETE_FLAG is NULL)

    #APPEND_WHERE_STR#

  </sql>

  <sql name="GetKoubunshoKisokuIDs">
    SELECT

    DM_KOUBUNSHO_KISOKU.DM_KOUBUNSHO_KISOKU_ID

    FROM
    DM_KOUBUNSHO_KISOKU
    INNER JOIN MS_DM_BUNRUI ON MS_DM_BUNRUI.MS_DM_BUNRUI_ID = DM_KOUBUNSHO_KISOKU.MS_DM_BUNRUI_ID
    LEFT JOIN MS_DM_SHOUBUNRUI ON MS_DM_SHOUBUNRUI.MS_DM_SHOUBUNRUI_ID = DM_KOUBUNSHO_KISOKU.MS_DM_SHOUBUNRUI_ID
    LEFT JOIN DM_KANRYO_INFO ON DM_KANRYO_INFO.LINK_SAKI_ID = DM_KOUBUNSHO_KISOKU.DM_KOUBUNSHO_KISOKU_ID AND DM_KANRYO_INFO.DELETE_FLAG = 0

    WHERE (DM_KOUBUNSHO_KISOKU.DELETE_FLAG = 0 or DM_KOUBUNSHO_KISOKU.DELETE_FLAG is NULL)

    #APPEND_WHERE_STR#
  </sql>

</databaseConfig>
