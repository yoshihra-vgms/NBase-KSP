<?xml version="1.0" encoding="utf-8" ?>

<databaseConfig>

  <sql name="GetStartWorkRecords">
    SELECT
    WORK.WORK_ID ,
    WORK.WTM_WORK_ID ,
    WORK.CREW_NO ,
    WORK.START_WORK ,
    WORK.FINISH_WORK ,

    WORK.MS_SENIN_ID ,
    WORK.MS_VESSEL_ID ,
    WORK.MS_SI_SHOKUMEI_ID ,
    WORK.SI_CARD_ID ,
    WORK.DATE_DIFF ,

    WORK.START_REG_HOSTNAME ,
    WORK.START_REG_DATE ,
    WORK.START_REG_STATUS ,
    WORK.START_REG_ERROR_MESSAGE ,

    WORK.FINISH_REG_HOSTNAME ,
    WORK.FINISH_REG_DATE ,
    WORK.FINISH_REG_STATUS ,
    WORK.FINISH_REG_ERROR_MESSAGE ,

    WORK.DELETE_FLAG,
    WORK.RENEW_DATE,
    WORK.RENEW_USER_ID,
    WORK.DATA_NO,
    WORK.TS

    FROM
    WORK

    WHERE DELETE_FLAG = 0
    AND CREW_NO = :CREW_NO
    AND WORK_ID IS NOT NULL
    AND FINISH_WORK IS NULL
    
    ORDER BY START_WORK
  </sql>
  

  <sql name="InsertRecord">
    INSERT INTO WORK
    (
    WORK_ID,
    WTM_WORK_ID,
    CREW_NO,
    START_WORK,
    FINISH_WORK,

    MS_SENIN_ID,
    MS_VESSEL_ID,
    MS_SI_SHOKUMEI_ID,
    SI_CARD_ID,
    DATE_DIFF,

    START_REG_HOSTNAME,
    START_REG_DATE,
    START_REG_STATUS,
    START_REG_ERROR_MESSAGE,

    FINISH_REG_HOSTNAME,
    FINISH_REG_DATE,
    FINISH_REG_STATUS,
    FINISH_REG_ERROR_MESSAGE,

    DELETE_FLAG,
    RENEW_DATE,
    RENEW_USER_ID,
    DATA_NO,
    TS
    )
    VALUES
    (
    nextval('SEQ_WORK_ID'),
    
    :WTM_WORK_ID,
    :CREW_NO,
    :START_WORK,
    :FINISH_WORK,

    :MS_SENIN_ID,
    :MS_VESSEL_ID,
    :MS_SI_SHOKUMEI_ID,
    :SI_CARD_ID,
    :DATE_DIFF,

    :START_REG_HOSTNAME,
    :START_REG_DATE,
    :START_REG_STATUS,
    :START_REG_ERROR_MESSAGE,

    :FINISH_REG_HOSTNAME,
    :FINISH_REG_DATE,
    :FINISH_REG_STATUS,
    :FINISH_REG_ERROR_MESSAGE,

    :DELETE_FLAG,
    :RENEW_DATE,
    :RENEW_USER_ID,
    :DATA_NO,
    :TS
    )
  </sql>


  <sql name="UpdateRecord">
    UPDATE WORK
    SET

    WTM_WORK_ID = :WTM_WORK_ID,
    CREW_NO = :CREW_NO,
    START_WORK = :START_WORK,
    FINISH_WORK = :FINISH_WORK,

    MS_SENIN_ID = :MS_SENIN_ID,
    MS_VESSEL_ID = :MS_VESSEL_ID,
    MS_SI_SHOKUMEI_ID = :MS_SI_SHOKUMEI_ID,
    SI_CARD_ID = :SI_CARD_ID,
    DATE_DIFF = :DATE_DIFF,

    START_REG_HOSTNAME = :START_REG_HOSTNAME,
    START_REG_DATE = :START_REG_DATE,
    START_REG_STATUS = :START_REG_STATUS,
    START_REG_ERROR_MESSAGE = :START_REG_ERROR_MESSAGE,

    FINISH_REG_HOSTNAME = :FINISH_REG_HOSTNAME,
    FINISH_REG_DATE = :FINISH_REG_DATE,
    FINISH_REG_STATUS = :FINISH_REG_STATUS,
    FINISH_REG_ERROR_MESSAGE = :FINISH_REG_ERROR_MESSAGE,

    DELETE_FLAG = :DELETE_FLAG,
    RENEW_DATE = :RENEW_DATE,
    RENEW_USER_ID = :RENEW_USER_ID,
    TS = :TS

    WHERE
    WORK_ID = :WORK_ID
  </sql>

  
</databaseConfig>
