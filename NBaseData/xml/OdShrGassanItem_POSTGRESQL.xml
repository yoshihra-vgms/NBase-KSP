<?xml version="1.0" encoding="utf-8" ?>

<databaseConfig>

  <sql name="GetRecords">
    SELECT

    OD_SHR_GASSAN_ITEM.OD_SHR_GASSAN_ITEM_ID
    ,OD_SHR_GASSAN_ITEM.OD_SHR_GASSAN_HEAD_ID
    ,OD_SHR_GASSAN_ITEM.OD_JRY_ID

    ,OD_SHR_GASSAN_ITEM.SEND_FLAG
    ,OD_SHR_GASSAN_ITEM.VESSEL_ID
    ,OD_SHR_GASSAN_ITEM.DATA_NO
    ,OD_SHR_GASSAN_ITEM.USER_KEY
    ,OD_SHR_GASSAN_ITEM.RENEW_DATE
    ,OD_SHR_GASSAN_ITEM.RENEW_USER_ID
    ,OD_SHR_GASSAN_ITEM.TS

    ,OD_JRY.JRY_DATE as OD_JRY_JRY_DATE
    ,OD_JRY.AMOUNT as OD_JRY_AMOUNT
    ,OD_JRY.NEBIKI_AMOUNT as OD_JRY_NEBIKI_AMOUNT
    ,OD_JRY.TAX as OD_JRY_TAX
    ,OD_THI.NAIYOU as OD_THI_NAIYOU
    ,OD_MK.HACHU_DATE as MS_HACHU_DATE
    ,OD_MK.HACHU_NO as MS_HACHU_NO
    ,MS_CUSTOMER.CUSTOMER_NAME as MS_CUSTOMER_NAME
    ,OD_JRY.KAMOKU_NO
    ,OD_JRY.UTIWAKE_KAMOKU_NO
    ,OD_JRY.CARRIAGE as OD_JRY_CARRIAGE

    FROM
    OD_SHR_GASSAN_ITEM

    INNER JOIN OD_JRY ON OD_JRY.OD_JRY_ID = OD_SHR_GASSAN_ITEM.OD_JRY_ID
    INNER JOIN OD_MK ON OD_JRY.OD_MK_ID = OD_MK.OD_MK_ID
    AND OD_MK.CANCEL_FLAG = 0
    INNER JOIN MS_CUSTOMER ON OD_MK.MS_CUSTOMER_ID = MS_CUSTOMER.MS_CUSTOMER_ID
    INNER JOIN OD_MM ON OD_MK.OD_MM_ID = OD_MM.OD_MM_ID
    AND OD_MM.CANCEL_FLAG = 0
    INNER JOIN OD_THI ON OD_MM.OD_THI_ID = OD_THI.OD_THI_ID
    AND OD_THI.CANCEL_FLAG = 0

  </sql>
  
  <sql name="ByOdShrGassanHeadId">
    WHERE OD_SHR_GASSAN_HEAD_ID = :OD_SHR_GASSAN_HEAD_ID
  </sql>
  <sql name="ByOdShrGassanItemId">
    WHERE OD_SHR_GASSAN_ITEM_ID = :OD_SHR_GASSAN_ITEM_ID
  </sql>
  
  <sql name="OrderBy">
    ORDER BY OD_JRY.JRY_DATE, OD_MK.HACHU_DATE, OD_MK.HACHU_NO
  </sql>


  <sql name="GetRecordsByOdShrId_ORG">
    SELECT

    OD_SHR_GASSAN_ITEM.OD_SHR_GASSAN_ITEM_ID
    ,OD_SHR_GASSAN_ITEM.OD_SHR_GASSAN_HEAD_ID
    ,OD_SHR_GASSAN_ITEM.OD_JRY_ID

    ,OD_SHR_GASSAN_ITEM.SEND_FLAG
    ,OD_SHR_GASSAN_ITEM.VESSEL_ID
    ,OD_SHR_GASSAN_ITEM.DATA_NO
    ,OD_SHR_GASSAN_ITEM.USER_KEY
    ,OD_SHR_GASSAN_ITEM.RENEW_DATE
    ,OD_SHR_GASSAN_ITEM.RENEW_USER_ID
    ,OD_SHR_GASSAN_ITEM.TS

    FROM
    OD_SHR_GASSAN_ITEM

    INNER JOIN OD_SHR_GASSAN_HEAD ON OD_SHR_GASSAN_HEAD.OD_SHR_GASSAN_HEAD_ID = OD_SHR_GASSAN_ITEM.OD_SHR_GASSAN_HEAD_ID
    AND OD_SHR_GASSAN_HEAD.OD_SHR_ID = :OD_SHR_ID

  </sql>
  <sql name="GetRecordsByOdShrId">
    SELECT

    OD_SHR_GASSAN_ITEM.OD_SHR_GASSAN_ITEM_ID
    ,OD_SHR_GASSAN_ITEM.OD_SHR_GASSAN_HEAD_ID
    ,OD_SHR_GASSAN_ITEM.OD_JRY_ID

    ,OD_SHR_GASSAN_ITEM.SEND_FLAG
    ,OD_SHR_GASSAN_ITEM.VESSEL_ID
    ,OD_SHR_GASSAN_ITEM.DATA_NO
    ,OD_SHR_GASSAN_ITEM.USER_KEY
    ,OD_SHR_GASSAN_ITEM.RENEW_DATE
    ,OD_SHR_GASSAN_ITEM.RENEW_USER_ID
    ,OD_SHR_GASSAN_ITEM.TS

    FROM
    OD_SHR_GASSAN_ITEM

    INNER JOIN OD_SHR_GASSAN_HEAD ON OD_SHR_GASSAN_HEAD.OD_SHR_GASSAN_HEAD_ID = OD_SHR_GASSAN_ITEM.OD_SHR_GASSAN_HEAD_ID
    AND OD_SHR_GASSAN_HEAD.CANCEL_FLAG = 0
    INNER JOIN OD_SHR ON OD_SHR.OD_JRY_ID = OD_SHR_GASSAN_HEAD.OD_JRY_ID
    AND OD_SHR.OD_SHR_ID = :OD_SHR_ID

  </sql>


  <sql name="InsertRecord">
    INSERT INTO OD_SHR_GASSAN_ITEM(
    OD_SHR_GASSAN_ITEM_ID
    ,OD_SHR_GASSAN_HEAD_ID
    ,OD_JRY_ID

    ,SEND_FLAG
    ,VESSEL_ID
    ,DATA_NO
    ,USER_KEY
    ,RENEW_DATE
    ,RENEW_USER_ID
    ,TS
    )
    VALUES(
    :OD_SHR_GASSAN_ITEM_ID
    ,:OD_SHR_GASSAN_HEAD_ID
    ,:OD_JRY_ID

    ,:SEND_FLAG
    ,:VESSEL_ID
    ,:DATA_NO
    ,:USER_KEY
    ,:RENEW_DATE
    ,:RENEW_USER_ID
    ,:TS
    )

  </sql>

  <sql name="DeleteRecordByOdShrGassanHeadID">
    DELETE FROM OD_SHR_GASSAN_ITEM
    WHERE OD_SHR_GASSAN_HEAD_ID = :OD_SHR_GASSAN_HEAD_ID
  </sql>

</databaseConfig>
