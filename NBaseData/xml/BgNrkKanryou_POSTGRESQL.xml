<?xml version="1.0" encoding="utf-8" ?>

<databaseConfig>

	<sql name="GetRecords">
    SELECT
    BG_NRK_KANRYOU.YOSAN_HEAD_ID,
    BG_NRK_KANRYOU.MS_BUMON_ID,
    BG_NRK_KANRYOU.NRK_KANRYO,
    BG_NRK_KANRYOU.NRK_KANRYOU_USER_ID,
    BG_NRK_KANRYOU.RENEW_DATE,
    BG_NRK_KANRYOU.RENEW_USER_ID,
    BG_NRK_KANRYOU.TS,

    MS_BUMON.BUMON_NAME,
    MS_USER.SEI || ' ' || MS_USER.MEI as NRK_KANRYOU_USER_NAME

    FROM
    BG_NRK_KANRYOU

    INNER JOIN MS_BUMON ON MS_BUMON.MS_BUMON_ID = BG_NRK_KANRYOU.MS_BUMON_ID
    LEFT JOIN MS_USER ON MS_USER.MS_USER_ID = BG_NRK_KANRYOU.NRK_KANRYOU_USER_ID

    WHERE 1 = 1
  </sql>

  <sql name="GetRecordsByMsUserID">
    SELECT
    BG_NRK_KANRYOU.YOSAN_HEAD_ID,
    BG_NRK_KANRYOU.MS_BUMON_ID,
    BG_NRK_KANRYOU.NRK_KANRYO,
    BG_NRK_KANRYOU.NRK_KANRYOU_USER_ID,
    BG_NRK_KANRYOU.RENEW_DATE,
    BG_NRK_KANRYOU.RENEW_USER_ID,
    BG_NRK_KANRYOU.TS,


    MS_USER.SEI || ' ' || MS_USER.MEI as NRK_KANRYOU_USER_NAME

    FROM
    BG_NRK_KANRYOU

    LEFT JOIN MS_USER ON MS_USER.MS_USER_ID = BG_NRK_KANRYOU.NRK_KANRYOU_USER_ID

    WHERE 1 = 1 AND
    BG_NRK_KANRYOU.NRK_KANRYOU_USER_ID = :MS_USER_ID

  </sql>

  <sql name="ByYosanHeadID">
    AND BG_NRK_KANRYOU.YOSAN_HEAD_ID = :YOSAN_HEAD_ID
  </sql>

  <sql name="GetRecord">
		SELECT
		BG_NRK_KANRYOU.YOSAN_HEAD_ID,
		BG_NRK_KANRYOU.MS_BUMON_ID,
		BG_NRK_KANRYOU.NRK_KANRYO,
		BG_NRK_KANRYOU.NRK_KANRYOU_USER_ID,
		BG_NRK_KANRYOU.RENEW_DATE,
		BG_NRK_KANRYOU.RENEW_USER_ID,
		BG_NRK_KANRYOU.TS
		FROM
		BG_NRK_KANRYOU
		WHERE
		(BG_NRK_KANRYOU.YOSAN_HEAD_ID = :YOSAN_HEAD_ID) AND
		(BG_NRK_KANRYOU.MS_BUMON_ID = :MS_BUMON_ID)
	</sql>

	<sql name="InsertRecord">
		INSERT INTO BG_NRK_KANRYOU
		(
		YOSAN_HEAD_ID,
		MS_BUMON_ID,
		NRK_KANRYO,
		NRK_KANRYOU_USER_ID,
		RENEW_DATE,
		RENEW_USER_ID,
		TS
		)
		VALUES
		(
		:YOSAN_HEAD_ID,
		:MS_BUMON_ID,
		:NRK_KANRYO,
		:NRK_KANRYOU_USER_ID,
		:RENEW_DATE,
		:RENEW_USER_ID,
		:TS
		)
	</sql>

	<sql name="UpdateRecord">
		UPDATE
		BG_NRK_KANRYOU
		SET
		NRK_KANRYO = :NRK_KANRYO,
		NRK_KANRYOU_USER_ID = :NRK_KANRYOU_USER_ID,
		RENEW_DATE = :RENEW_DATE,
		RENEW_USER_ID = :RENEW_USER_ID
		WHERE
		(YOSAN_HEAD_ID = :YOSAN_HEAD_ID) AND
		(MS_BUMON_ID = :MS_BUMON_ID) AND
		(TS = :TS)
	</sql>

</databaseConfig>