<?xml version="1.0" encoding="utf-8" ?>

<databaseConfig>

  <sql name="GetRecords">
    SELECT
    OD_MK.OD_MK_ID                       ,
    OD_MK.STATUS                         ,
    OD_MK.CANCEL_FLAG                    ,
    OD_MK.OD_MM_ID                       ,
    OD_MK.MS_CUSTOMER_ID                 ,
    OD_MK.TANTOUSHA                      ,
    OD_MK.MK_DATE                        ,
    OD_MK.NOUKI                          ,
    OD_MK.KOUKI                          ,
    OD_MK.MK_NO                          ,
    OD_MK.MK_AMOUNT                      ,
    OD_MK.TANTOU_MAIL_ADDRESS            ,
    OD_MK.HACHU_DATE                     ,
    OD_MK.HACHU_NO                       ,
    OD_MK.MS_NYUKYO_KAMOKU_ID            ,
    OD_MK.TAX                            ,
    OD_MK.SEND_FLAG                      ,
    OD_MK.VESSEL_ID                      ,
    OD_MK.DATA_NO                        ,
    OD_MK.USER_KEY                       ,
    OD_MK.RENEW_DATE                     ,
    OD_MK.RENEW_USER_ID                  ,
    OD_MK.TS                             ,
    OD_MK.AMOUNT                         ,
    OD_MK.WEB_KEY                        ,
    OD_MK.MK_KIGEN                       ,
    OD_MK.MK_YUKOU_KIGEN                 ,
    OD_MK.KIBOUBI                        ,
    OD_MK.CREATE_DATE                    ,
    OD_MK.CREATE_USER_ID                 ,
    OD_MK.MM_DATE                        ,
    MS_CUSTOMER.CUSTOMER_NAME        as MS_CUSTOMER_NAME,
    MS_VESSEL.VESSEL_NAME            as MS_VESSEL_NAME,
    OD_THI.MS_VESSEL_ID              as MS_VESSEL_ID,
    OD_THI.MS_THI_IRAI_SBT_ID        as MS_THI_IRAI_SBT_ID,
    OD_THI.MS_THI_IRAI_SHOUSAI_ID    as MS_THI_IRAI_SHOUSAI_ID,
    OD_THI.NAIYOU                    as OD_THI_NAIYOU,
    OD_THI.BIKOU                     as OD_THI_BIKOU,
    OD_THI.OD_THI_ID,
    OD_THI.TEHAI_IRAI_NO,
    OD_MM.MM_NO
    ,OD_MK.CARRIAGE
    ,OD_MK.NENDO
   
    FROM
    OD_MK
    LEFT OUTER JOIN MS_CUSTOMER ON MS_CUSTOMER.MS_CUSTOMER_ID = OD_MK.MS_CUSTOMER_ID

    INNER JOIN OD_MM ON OD_MM.OD_MM_ID = OD_MK.OD_MM_ID AND OD_MM.CANCEL_FLAG = 0
    INNER JOIN OD_THI ON OD_THI.OD_THI_ID = OD_MM.OD_THI_ID AND OD_THI.CANCEL_FLAG = 0
    INNER JOIN MS_VESSEL ON MS_VESSEL.MS_VESSEL_ID = OD_THI.MS_VESSEL_ID

    #APPEND_JOIN_STR#

    WHERE OD_MK.CANCEL_FLAG = 0
  </sql>
  <sql name="OrderByNo">
    ORDER BY OD_THI.TEHAI_IRAI_NO, OD_MM.MM_NO, OD_MK.MK_NO
  </sql>
	
  <sql name="OrderByNo2">
	ORDER BY TEHAI_IRAI_NO, MM_NO, MK_NO
  </sql>

  <sql name="ByOdThiID">
    AND OD_THI.OD_THI_ID = :OD_THI_ID
  </sql>

  <sql name="ByOdMmID">
    AND OD_MK.OD_MM_ID = :OD_MM_ID
  </sql>

  <sql name="ByOdMkID">
    AND OD_MK.OD_MK_ID = :OD_MK_ID
  </sql>

  <sql name="ByWebKey">
    AND OD_MK.WEB_KEY = :WEB_KEY
  </sql>

  <sql name="FilterByStatus">
    AND OD_MK.STATUS = :STATUS
  </sql>
  <sql name="FilterByMsVesselId">
    AND OD_THI.MS_VESSEL_ID = :MS_VESSEL_ID
  </sql>
  <sql name="FilterByJimTantouID">
    AND OD_THI.JIM_TANTOU_ID = :JIM_TANTOU_ID
  </sql>

  
  <sql name="FilterByThiIraiSbtID">
    AND OD_THI.MS_THI_IRAI_SBT_ID = :MS_THI_IRAI_SBT_ID
  </sql>
  <sql name="FilterByThiIraiShousaiID">
    AND OD_THI.MS_THI_IRAI_SHOUSAI_ID = :MS_THI_IRAI_SHOUSAI_ID
  </sql>
  <sql name="FilterByMsThiIraiStatusID_20140220">
    AND OD_THI.MS_THI_IRAI_STATUS_ID IN ( #INNER_SQL_MS_THI_IRAI_STATUS_IDS# )
  </sql>
  <sql name="FilterByMsThiIraiStatusID">
    OD_THI.MS_THI_IRAI_STATUS_ID IN ( #INNER_SQL_MS_THI_IRAI_STATUS_IDS# )
  </sql>
  <sql name="FilterByThiIraiDateFrom">
    AND TO_CHAR(OD_THI.THI_IRAI_DATE,'YYYY/MM/DD') >= TO_CHAR(:THI_IRAI_DATE_FROM,'YYYY/MM/DD')
  </sql>
  <sql name="FilterByThiIraiDateTo">
    AND TO_CHAR(OD_THI.THI_IRAI_DATE,'YYYY/MM/DD') &lt;= TO_CHAR(:THI_IRAI_DATE_TO,'YYYY/MM/DD')
  </sql>
  <sql name="FilterByThiIraiDateFromTo">
    AND TO_CHAR(OD_THI.THI_IRAI_DATE,'YYYY/MM/DD') >= TO_CHAR(:THI_IRAI_DATE_FROM,'YYYY/MM/DD')
    AND TO_CHAR(OD_THI.THI_IRAI_DATE,'YYYY/MM/DD') &lt;= TO_CHAR(:THI_IRAI_DATE_TO,'YYYY/MM/DD')
  </sql>
  <sql name="AppendJoinForOdThiFilter">
    INNER JOIN OD_JRY ON OD_JRY.OD_MK_ID = OD_MK.OD_MK_ID AND OD_JRY.CANCEL_FLAG = 0
  </sql>
  <sql name="FilterByJryDateFrom">
    AND TO_CHAR(OD_JRY.JRY_DATE,'YYYY/MM/DD') >= TO_CHAR(:JRY_DATE_FROM,'YYYY/MM/DD')
  </sql>
  <sql name="FilterByJryDateTo">
    AND TO_CHAR(OD_JRY.JRY_DATE,'YYYY/MM/DD') &lt;= TO_CHAR(:JRY_DATE_TO,'YYYY/MM/DD')
  </sql>
  <sql name="FilterByJryDateFromTo">
    AND TO_CHAR(OD_JRY.JRY_DATE,'YYYY/MM/DD') >= TO_CHAR(:JRY_DATE_FROM,'YYYY/MM/DD')
    AND TO_CHAR(OD_JRY.JRY_DATE,'YYYY/MM/DD') &lt;= TO_CHAR(:JRY_DATE_TO,'YYYY/MM/DD')
  </sql>
  <sql name="FilterByJryStatus">
    OD_JRY.STATUS = :JRY_STATUS
  </sql>
  
  <sql name="InsertRecord">
    INSERT INTO
    OD_MK
    (
    OD_MK_ID                       ,
    STATUS                         ,
    CANCEL_FLAG                    ,
    OD_MM_ID                       ,
    MS_CUSTOMER_ID                 ,
    TANTOUSHA                      ,
    MK_DATE                        ,
    NOUKI                          ,
    KOUKI                          ,
    MK_NO                          ,
    MK_AMOUNT                      ,
    TANTOU_MAIL_ADDRESS            ,
    HACHU_DATE                     ,
    HACHU_NO                       ,
    MS_NYUKYO_KAMOKU_ID            ,
    TAX                            ,
    SEND_FLAG                      ,
    VESSEL_ID                      ,
    DATA_NO                        ,
    USER_KEY                       ,
    RENEW_DATE                     ,
    RENEW_USER_ID                  ,
    AMOUNT                         ,
    WEB_KEY                        ,
    MK_KIGEN                       ,
    MK_YUKOU_KIGEN                 ,
    TS                             ,
    KIBOUBI                        ,
    CREATE_DATE                    ,
    CREATE_USER_ID                 ,
    MM_DATE
    ,CARRIAGE
    ,NENDO
    )
    VALUES
    (
    :OD_MK_ID                       ,
    :STATUS                         ,
    :CANCEL_FLAG                    ,
    :OD_MM_ID                       ,
    :MS_CUSTOMER_ID                 ,
    :TANTOUSHA                      ,
    :MK_DATE                        ,
    :NOUKI                          ,
    :KOUKI                          ,
    :MK_NO                          ,
    :MK_AMOUNT                      ,
    :TANTOU_MAIL_ADDRESS            ,
    :HACHU_DATE                     ,
    :HACHU_NO                       ,
    :MS_NYUKYO_KAMOKU_ID            ,
    :TAX                            ,
    :SEND_FLAG                      ,
    :VESSEL_ID                      ,
    :DATA_NO                        ,
    :USER_KEY                       ,
    :RENEW_DATE                     ,
    :RENEW_USER_ID                  ,
    :AMOUNT                         ,
    :WEB_KEY                        ,
    :MK_KIGEN                       ,
    :MK_YUKOU_KIGEN                 ,
    :TS                             ,
    :KIBOUBI                        ,
    :CREATE_DATE                    ,
    :CREATE_USER_ID                 ,
    :MM_DATE
    ,:CARRIAGE
    ,:NENDO
    )
  </sql>

  <sql name="UpdateRecord">
    UPDATE
    OD_MK
    SET
    OD_MK_ID = :OD_MK_ID                             ,
    STATUS = :STATUS                                 ,
    CANCEL_FLAG = :CANCEL_FLAG                       ,
    OD_MM_ID = :OD_MM_ID                             ,
    MS_CUSTOMER_ID = :MS_CUSTOMER_ID                 ,
    TANTOUSHA = :TANTOUSHA                           ,
    MK_DATE = :MK_DATE                               ,
    NOUKI = :NOUKI                                   ,
    KOUKI = :KOUKI                                   ,
    MK_NO = :MK_NO                                   ,
    MK_AMOUNT = :MK_AMOUNT                           ,
    TANTOU_MAIL_ADDRESS = :TANTOU_MAIL_ADDRESS       ,
    HACHU_DATE = :HACHU_DATE                         ,
    HACHU_NO = :HACHU_NO                             ,
    MS_NYUKYO_KAMOKU_ID = :MS_NYUKYO_KAMOKU_ID       ,
    TAX = :TAX                                       ,
    SEND_FLAG = :SEND_FLAG                           ,
    VESSEL_ID = :VESSEL_ID                           ,
    DATA_NO = :DATA_NO                               ,
    USER_KEY = :USER_KEY                             ,
    RENEW_DATE = :RENEW_DATE                         ,
    RENEW_USER_ID = :RENEW_USER_ID                   ,
    AMOUNT = :AMOUNT                                 ,
    WEB_KEY = :WEB_KEY                               ,
    MK_KIGEN = :MK_KIGEN                             ,
    MK_YUKOU_KIGEN = :MK_YUKOU_KIGEN                 ,
    TS = :TS                                         ,
    KIBOUBI = :KIBOUBI                               ,
    MM_DATE = :MM_DATE                               ,
    CREATE_DATE = :CREATE_DATE                       ,
    CREATE_USER_ID = :CREATE_USER_ID
    ,CARRIAGE = :CARRIAGE
    ,NENDO = :NENDO

    WHERE
    OD_MK_ID = :OD_MK_ID
    AND
    TS = :TS
  </sql>

  <sql name="DeleteRecord">
    DELETE FROM OD_MK
    WHERE OD_MK_ID = :OD_MK_ID
    AND TS = :TS
  </sql>

</databaseConfig>