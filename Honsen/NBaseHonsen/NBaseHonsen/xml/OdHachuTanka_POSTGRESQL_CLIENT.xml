<?xml version="1.0" encoding="utf-8" ?>

<databaseConfig>

	<sql name="GetRecords">
    SELECT
    OD_HACHU_TANKA.OD_HACHU_TANKA_ID,
    OD_HACHU_TANKA.MS_VESSEL_ITEM_ID,
    OD_HACHU_TANKA.MS_LO_ID,
    OD_HACHU_TANKA.TANKA,
    OD_HACHU_TANKA.TANKA_SETEIBI,
    OD_HACHU_TANKA.OD_JRY_SHOUSAI_ITEM_ID,
    OD_HACHU_TANKA.OD_SHR_SHOUSAI_ITEM_ID,
    OD_HACHU_TANKA.SEND_FLAG,
    OD_HACHU_TANKA.VESSEL_ID,
    OD_HACHU_TANKA.DATA_NO,
    OD_HACHU_TANKA.USER_KEY,
    OD_HACHU_TANKA.RENEW_DATE,
    OD_HACHU_TANKA.RENEW_USER_ID,
    OD_HACHU_TANKA.TS
    FROM OD_HACHU_TANKA
  </sql>


	<sql name="GetRecordByMsLoID_MsVesselItemID_Date">
    SELECT
    OD_HACHU_TANKA.OD_HACHU_TANKA_ID,
    OD_HACHU_TANKA.MS_VESSEL_ITEM_ID,
    OD_HACHU_TANKA.MS_LO_ID,
    OD_HACHU_TANKA.TANKA,
    OD_HACHU_TANKA.TANKA_SETEIBI,
    OD_HACHU_TANKA.OD_JRY_SHOUSAI_ITEM_ID,
    OD_HACHU_TANKA.OD_SHR_SHOUSAI_ITEM_ID,
    OD_HACHU_TANKA.SEND_FLAG,
    OD_HACHU_TANKA.VESSEL_ID,
    OD_HACHU_TANKA.DATA_NO,
    OD_HACHU_TANKA.USER_KEY,
    OD_HACHU_TANKA.RENEW_DATE,
    OD_HACHU_TANKA.RENEW_USER_ID,
    OD_HACHU_TANKA.TS
    FROM OD_HACHU_TANKA
    WHERE
    ((OD_HACHU_TANKA.MS_LO_ID = :MS_LO_ID) OR (OD_HACHU_TANKA.MS_VESSEL_ITEM_ID = :MS_VESSEL_ITEM_ID)) AND
    (OD_HACHU_TANKA.TANKA_SETEIBI BETWEEN :START_DATE AND :END_DATE)
    ORDER BY OD_HACHU_TANKA.TANKA_SETEIBI DESC
  </sql>


	<sql name="GetRecordsByMsVesselItemID_Date_LO">
    SELECT
    OD_HACHU_TANKA.OD_HACHU_TANKA_ID,
    OD_HACHU_TANKA.MS_VESSEL_ITEM_ID,
    OD_HACHU_TANKA.MS_LO_ID,
    OD_HACHU_TANKA.TANKA,
    OD_HACHU_TANKA.TANKA_SETEIBI,
    OD_HACHU_TANKA.OD_JRY_SHOUSAI_ITEM_ID,
    OD_HACHU_TANKA.OD_SHR_SHOUSAI_ITEM_ID,
    OD_HACHU_TANKA.SEND_FLAG,
    OD_HACHU_TANKA.VESSEL_ID,
    OD_HACHU_TANKA.DATA_NO,
    OD_HACHU_TANKA.USER_KEY,
    OD_HACHU_TANKA.RENEW_DATE,
    OD_HACHU_TANKA.RENEW_USER_ID,
    OD_HACHU_TANKA.TS
    FROM OD_HACHU_TANKA
    WHERE TANKA_SETEIBI IN
    (
    SELECT max(TANKA_SETEIBI)
    FROM OD_HACHU_TANKA
    WHERE
    (TANKA_SETEIBI BETWEEN :START_DATE AND :END_DATE)  AND
    OD_HACHU_TANKA.MS_LO_ID IN
    (
    SELECT MS_LO_ID
    FROM MS_LO_VESSEL
    WHERE MS_VESSEL_ID = :MS_VESSEL_ID
    )
    GROUP BY MS_LO_ID
    )
  </sql>



	<sql name="GetRecordsByMsVesselItemID_Date_VesselItem">
    SELECT
    OD_HACHU_TANKA.OD_HACHU_TANKA_ID,
    OD_HACHU_TANKA.MS_VESSEL_ITEM_ID,
    OD_HACHU_TANKA.MS_LO_ID,
    OD_HACHU_TANKA.TANKA,
    OD_HACHU_TANKA.TANKA_SETEIBI,
    OD_HACHU_TANKA.OD_JRY_SHOUSAI_ITEM_ID,
    OD_HACHU_TANKA.OD_SHR_SHOUSAI_ITEM_ID,
    OD_HACHU_TANKA.SEND_FLAG,
    OD_HACHU_TANKA.VESSEL_ID,
    OD_HACHU_TANKA.DATA_NO,
    OD_HACHU_TANKA.USER_KEY,
    OD_HACHU_TANKA.RENEW_DATE,
    OD_HACHU_TANKA.RENEW_USER_ID,
    OD_HACHU_TANKA.TS
    FROM OD_HACHU_TANKA
    WHERE TANKA_SETEIBI IN
    (
    SELECT max(TANKA_SETEIBI)
    FROM OD_HACHU_TANKA
    WHERE
    (TANKA_SETEIBI BETWEEN :START_DATE AND :END_DATE)  AND
    OD_HACHU_TANKA.MS_VESSEL_ITEM_ID IN
    (
    SELECT MS_VESSEL_ITEM_ID
    FROM MS_VESSEL_ITEM_VESSEL
    WHERE MS_VESSEL_ID = :MS_VESSEL_ID
    )
    GROUP BY MS_VESSEL_ITEM_ID
    )

  </sql>

  <sql name="InsertRecord">
    INSERT INTO OD_HACHU_TANKA(
    OD_HACHU_TANKA_ID,
    MS_VESSEL_ITEM_ID,
    MS_LO_ID,
    TANKA,
    TANKA_SETEIBI,
    OD_JRY_SHOUSAI_ITEM_ID,
    OD_SHR_SHOUSAI_ITEM_ID,
    SEND_FLAG,
    VESSEL_ID,
    DATA_NO,
    USER_KEY,
    RENEW_DATE,
    RENEW_USER_ID,
    TS
    )
    VALUES
    (
    :OD_HACHU_TANKA_ID,
    :MS_VESSEL_ITEM_ID,
    :MS_LO_ID,
    :TANKA,
    :TANKA_SETEIBI,
    :OD_JRY_SHOUSAI_ITEM_ID,
    :OD_SHR_SHOUSAI_ITEM_ID,
    :SEND_FLAG,
    :VESSEL_ID,
    :DATA_NO,
    :USER_KEY,
    :RENEW_DATE,
    :RENEW_USER_ID,
    :TS
    )

  </sql>

  <sql name="UpdateRecord">
    UPDATE OD_HACHU_TANKA SET
    MS_VESSEL_ITEM_ID= :MS_VESSEL_ITEM_ID,
    MS_LO_ID= :MS_LO_ID,
    TANKA= :TANKA,
    TANKA_SETEIBI= :TANKA_SETEIBI,
    OD_JRY_SHOUSAI_ITEM_ID= :OD_JRY_SHOUSAI_ITEM_ID,
    OD_SHR_SHOUSAI_ITEM_ID= :OD_SHR_SHOUSAI_ITEM_ID,
    SEND_FLAG= :SEND_FLAG,
    VESSEL_ID= :VESSEL_ID,
    DATA_NO= :DATA_NO,
    USER_KEY= :USER_KEY,
    RENEW_DATE= :RENEW_DATE,
    RENEW_USER_ID= :RENEW_USER_ID,
    TS = :TS

    WHERE
    OD_HACHU_TANKA_ID = :OD_HACHU_TANKA_ID
  </sql>

</databaseConfig>
